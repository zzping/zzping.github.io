(window.webpackJsonp=window.webpackJsonp||[]).push([[34],{430:function(s,a,n){"use strict";n.r(a);var t=n(45),e=Object(t.a)({},(function(){var s=this,a=s.$createElement,n=s._self._c||a;return n("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[n("h2",{attrs:{id:"字节码文件-class文件-概述"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#字节码文件-class文件-概述"}},[s._v("#")]),s._v(" 字节码文件（Class文件）概述")]),s._v(" "),n("p",[s._v("Java 是跨平台的语言（write once，run anywhere），当 Java 源代码经过编译后生成的字节码文件（.class 文件）可以运行在不同平台的 Java 虚拟机上。")]),s._v(" "),n("p",[s._v('各种不同平台的 Java 虚拟机都统一支持的程序存储格式 - 字节码是构成平台无关性的基石。Java 虚拟机不与包括 Java 语在内的任何语言绑定，它只与 "Class 文件" 这个只不过特定的二进制文件格式所关联。')]),s._v(" "),n("p",[s._v("Class 文件中包含了 Java 虚拟机指令集、符号表以及若干其他辅助信息。")]),s._v(" "),n("h3",{attrs:{id:"class-类文件结构"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#class-类文件结构"}},[s._v("#")]),s._v(" Class 类文件结构")]),s._v(" "),n("p",[s._v("根据《Java 虚拟机规范》的规定，Class 文件格式采用一种类似 C 语言结构体的伪结构来存储数据，这种伪结构中只有两种数据类型："),n("code",[s._v("无符号数")]),s._v("和"),n("code",[s._v("表")]),s._v("。")]),s._v(" "),n("ul",[n("li",[s._v("无符号数属于基本的数据类型，以 u1、u2、u4、u8 来分别代表1个字节、2个字节、4个字节、8个字节的无符号数。无符号数可以用来描述数字、索引引用、数量值或者按照 UTF-8 编码构成字符串值。")]),s._v(" "),n("li",[s._v("表是由多个无符号数或者其他表作为数据项构成的复合数据类型。为了便于区分，所有表的命名都习惯性地以 _info 结尾。表用于描述有层次关系的复合结构的数据，整个 Class 文件本质上也可以看成是一张表。")])]),s._v(" "),n("p",[s._v("Class 文件格式整体如下：")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("ClassFile {\n    u4             magic; // Class 文件的标志：魔数\n    u2             minor_version;// Class 的次版本号\n    u2             major_version;// Class 的主版本号\n    u2             constant_pool_count;// 常量池的数量\n    cp_info        constant_pool[constant_pool_count-1];// 常量池\n    u2             access_flags;// Class 的访问标志\n    u2             this_class;// 当前类\n    u2             super_class;// 父类\n    u2             interfaces_count;// 接口\n    u2             interfaces[interfaces_count];// 一个类可以实现多个接口\n    u2             fields_count;// Class 文件的字段属性\n    field_info     fields[fields_count];// 一个类会可以有个字段\n    u2             methods_count;// Class 文件的方法数量\n    method_info    methods[methods_count];// 一个类可以有个多个方法\n    u2             attributes_count;// 此类的属性表中的属性数\n    attribute_info attributes[attributes_count];// 属性表集合\n}\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br")])])])}),[],!1,null,null,null);a.default=e.exports}}]);