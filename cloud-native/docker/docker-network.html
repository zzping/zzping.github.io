<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Docker 网络 | 南风知我意</title>
    <meta name="generator" content="VuePress 1.8.2">
    <link rel="icon" href="/images/nf.png">
    <meta name="description" content="后端开发 南风知我意的个人网站">
    
    <link rel="preload" href="/assets/css/0.styles.d2a44814.css" as="style"><link rel="preload" href="/assets/js/app.fa9b922e.js" as="script"><link rel="preload" href="/assets/js/2.25cc5d58.js" as="script"><link rel="preload" href="/assets/js/16.bc1151d9.js" as="script"><link rel="prefetch" href="/assets/js/10.a87e3e41.js"><link rel="prefetch" href="/assets/js/11.0364ff90.js"><link rel="prefetch" href="/assets/js/12.311eca75.js"><link rel="prefetch" href="/assets/js/13.0157e368.js"><link rel="prefetch" href="/assets/js/14.12ac4ad9.js"><link rel="prefetch" href="/assets/js/15.356aa848.js"><link rel="prefetch" href="/assets/js/17.def4874d.js"><link rel="prefetch" href="/assets/js/18.e350c724.js"><link rel="prefetch" href="/assets/js/19.e83e1d7c.js"><link rel="prefetch" href="/assets/js/20.c97de166.js"><link rel="prefetch" href="/assets/js/21.d2f7bd5c.js"><link rel="prefetch" href="/assets/js/22.41adaee0.js"><link rel="prefetch" href="/assets/js/23.799354b2.js"><link rel="prefetch" href="/assets/js/24.95fca6d6.js"><link rel="prefetch" href="/assets/js/25.465e8b94.js"><link rel="prefetch" href="/assets/js/26.16f7559c.js"><link rel="prefetch" href="/assets/js/27.ff4ffb1f.js"><link rel="prefetch" href="/assets/js/28.044518d6.js"><link rel="prefetch" href="/assets/js/29.dd693b24.js"><link rel="prefetch" href="/assets/js/3.ac93ca0a.js"><link rel="prefetch" href="/assets/js/30.962c7f0b.js"><link rel="prefetch" href="/assets/js/31.ed040a46.js"><link rel="prefetch" href="/assets/js/32.173e5f2d.js"><link rel="prefetch" href="/assets/js/33.02ea8a18.js"><link rel="prefetch" href="/assets/js/34.bb262992.js"><link rel="prefetch" href="/assets/js/35.896e9f41.js"><link rel="prefetch" href="/assets/js/36.1ddb7248.js"><link rel="prefetch" href="/assets/js/37.334aca7d.js"><link rel="prefetch" href="/assets/js/38.c0b524c3.js"><link rel="prefetch" href="/assets/js/39.1fa89074.js"><link rel="prefetch" href="/assets/js/4.ffc5bef0.js"><link rel="prefetch" href="/assets/js/40.d6313086.js"><link rel="prefetch" href="/assets/js/41.3f1e2bbd.js"><link rel="prefetch" href="/assets/js/42.29fd018f.js"><link rel="prefetch" href="/assets/js/43.3f4c39b8.js"><link rel="prefetch" href="/assets/js/44.7ecbe764.js"><link rel="prefetch" href="/assets/js/45.bec8ffa7.js"><link rel="prefetch" href="/assets/js/46.4d6373ca.js"><link rel="prefetch" href="/assets/js/47.a2c38019.js"><link rel="prefetch" href="/assets/js/48.36ff8bd5.js"><link rel="prefetch" href="/assets/js/49.d7349f0b.js"><link rel="prefetch" href="/assets/js/5.48532fea.js"><link rel="prefetch" href="/assets/js/50.3da1f291.js"><link rel="prefetch" href="/assets/js/51.45ef4844.js"><link rel="prefetch" href="/assets/js/52.8986512b.js"><link rel="prefetch" href="/assets/js/53.749813e1.js"><link rel="prefetch" href="/assets/js/54.96f2a134.js"><link rel="prefetch" href="/assets/js/55.4879e422.js"><link rel="prefetch" href="/assets/js/56.e8428beb.js"><link rel="prefetch" href="/assets/js/57.ca777ff0.js"><link rel="prefetch" href="/assets/js/58.dbb557db.js"><link rel="prefetch" href="/assets/js/59.df72912c.js"><link rel="prefetch" href="/assets/js/6.5eff19f1.js"><link rel="prefetch" href="/assets/js/60.d1ef93aa.js"><link rel="prefetch" href="/assets/js/61.b14ca761.js"><link rel="prefetch" href="/assets/js/62.2b179e3c.js"><link rel="prefetch" href="/assets/js/63.2f9c3889.js"><link rel="prefetch" href="/assets/js/64.9aa6d939.js"><link rel="prefetch" href="/assets/js/65.566da386.js"><link rel="prefetch" href="/assets/js/66.ce6ae55d.js"><link rel="prefetch" href="/assets/js/67.ba64f924.js"><link rel="prefetch" href="/assets/js/68.bfc2523e.js"><link rel="prefetch" href="/assets/js/69.1df26faa.js"><link rel="prefetch" href="/assets/js/7.100b5646.js"><link rel="prefetch" href="/assets/js/70.2063729c.js"><link rel="prefetch" href="/assets/js/71.ec1b8104.js"><link rel="prefetch" href="/assets/js/72.324f3a5e.js"><link rel="prefetch" href="/assets/js/73.17c953d3.js"><link rel="prefetch" href="/assets/js/74.0445d80d.js"><link rel="prefetch" href="/assets/js/75.d323dbb7.js"><link rel="prefetch" href="/assets/js/76.01731c02.js"><link rel="prefetch" href="/assets/js/77.040d470d.js"><link rel="prefetch" href="/assets/js/78.33374f69.js"><link rel="prefetch" href="/assets/js/79.5b3d3b01.js"><link rel="prefetch" href="/assets/js/8.298793bd.js"><link rel="prefetch" href="/assets/js/80.3d4ad376.js"><link rel="prefetch" href="/assets/js/81.7fa4543b.js"><link rel="prefetch" href="/assets/js/82.31832c90.js"><link rel="prefetch" href="/assets/js/83.291a632f.js"><link rel="prefetch" href="/assets/js/84.3efd8628.js"><link rel="prefetch" href="/assets/js/85.27beb273.js"><link rel="prefetch" href="/assets/js/86.d5228a1d.js"><link rel="prefetch" href="/assets/js/87.cad2873f.js"><link rel="prefetch" href="/assets/js/88.76fdf951.js"><link rel="prefetch" href="/assets/js/89.a9d71c3d.js"><link rel="prefetch" href="/assets/js/9.04671bc7.js"><link rel="prefetch" href="/assets/js/90.da55c751.js"><link rel="prefetch" href="/assets/js/91.0b29096c.js">
    <link rel="stylesheet" href="/assets/css/0.styles.d2a44814.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">南风知我意</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">
  首页
</a></div><div class="nav-item"><a href="/java-core/exception.html" class="nav-link">
  Java核心基础
</a></div><div class="nav-item"><a href="/jvm/structure.html" class="nav-link">
  JVM学习
</a></div><div class="nav-item"><a href="/mybatis/mybatis-overview.html" class="nav-link">
  Mybatis
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Spring全家桶" class="dropdown-title"><span class="title">Spring全家桶</span> <span class="arrow down"></span></button> <button type="button" aria-label="Spring全家桶" class="mobile-dropdown-title"><span class="title">Spring全家桶</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/spring-all/spring-framework/ioc-interface.html" class="nav-link">
  Spring Framework
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="拥抱云原生" class="dropdown-title"><span class="title">拥抱云原生</span> <span class="arrow down"></span></button> <button type="button" aria-label="拥抱云原生" class="mobile-dropdown-title"><span class="title">拥抱云原生</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/cloud-native/cloud-native-concepts/" class="nav-link">
  云原生概念
</a></li><li class="dropdown-item"><!----> <a href="/cloud-native/docker/docker-overview/" class="nav-link">
  Docker
</a></li><li class="dropdown-item"><!----> <a href="/cloud-native/kubernetes/" class="nav-link">
  Kubernetes
</a></li><li class="dropdown-item"><!----> <a href="/cloud-native/devops/" class="nav-link">
  DevOps
</a></li></ul></div></div><div class="nav-item"><a href="/frontend/vue/vue-overview.html" class="nav-link">
  前端 - Vue
</a></div><div class="nav-item"><a href="/other/java8/why-java8.html" class="nav-link">
  零散知识
</a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">
  首页
</a></div><div class="nav-item"><a href="/java-core/exception.html" class="nav-link">
  Java核心基础
</a></div><div class="nav-item"><a href="/jvm/structure.html" class="nav-link">
  JVM学习
</a></div><div class="nav-item"><a href="/mybatis/mybatis-overview.html" class="nav-link">
  Mybatis
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Spring全家桶" class="dropdown-title"><span class="title">Spring全家桶</span> <span class="arrow down"></span></button> <button type="button" aria-label="Spring全家桶" class="mobile-dropdown-title"><span class="title">Spring全家桶</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/spring-all/spring-framework/ioc-interface.html" class="nav-link">
  Spring Framework
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="拥抱云原生" class="dropdown-title"><span class="title">拥抱云原生</span> <span class="arrow down"></span></button> <button type="button" aria-label="拥抱云原生" class="mobile-dropdown-title"><span class="title">拥抱云原生</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/cloud-native/cloud-native-concepts/" class="nav-link">
  云原生概念
</a></li><li class="dropdown-item"><!----> <a href="/cloud-native/docker/docker-overview/" class="nav-link">
  Docker
</a></li><li class="dropdown-item"><!----> <a href="/cloud-native/kubernetes/" class="nav-link">
  Kubernetes
</a></li><li class="dropdown-item"><!----> <a href="/cloud-native/devops/" class="nav-link">
  DevOps
</a></li></ul></div></div><div class="nav-item"><a href="/frontend/vue/vue-overview.html" class="nav-link">
  前端 - Vue
</a></div><div class="nav-item"><a href="/other/java8/why-java8.html" class="nav-link">
  零散知识
</a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>容器技术 Docker</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/cloud-native/docker/docker-overview.html" class="sidebar-link">Docker 概述</a></li><li><a href="/cloud-native/docker/docker-architecture.html" class="sidebar-link">Docker 架构</a></li><li><a href="/cloud-native/docker/docker-install.html" class="sidebar-link">Docker 安装</a></li><li><a href="/cloud-native/docker/docker-three-elements.html" class="sidebar-link">Docker 三要素</a></li><li><a href="/cloud-native/docker/docker-commands.html" class="sidebar-link">Docker 常用命令</a></li><li><a href="/cloud-native/docker/docker-data-persistent.html" class="sidebar-link">Docker 数据持久化</a></li><li><a href="/cloud-native/docker/docker-network.html" aria-current="page" class="active sidebar-link">Docker 网络</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/cloud-native/docker/docker-network.html#bridge-驱动-桥接模式" class="sidebar-link">bridge 驱动（桥接模式）</a></li><li class="sidebar-sub-header"><a href="/cloud-native/docker/docker-network.html#host-驱动" class="sidebar-link">host 驱动</a></li><li class="sidebar-sub-header"><a href="/cloud-native/docker/docker-network.html#overlay-驱动" class="sidebar-link">overlay 驱动</a></li><li class="sidebar-sub-header"><a href="/cloud-native/docker/docker-network.html#macvlan-驱动" class="sidebar-link">macvlan 驱动</a></li><li class="sidebar-sub-header"><a href="/cloud-native/docker/docker-network.html#none-驱动" class="sidebar-link">none 驱动</a></li><li class="sidebar-sub-header"><a href="/cloud-native/docker/docker-network.html#几种网络模式的总结" class="sidebar-link">几种网络模式的总结</a></li></ul></li><li><a href="/cloud-native/docker/docker-install-service.html" class="sidebar-link">Docker 安装常用的软件</a></li><li><a href="/cloud-native/docker/docker-dockerfile.html" class="sidebar-link">Dockerfile</a></li><li><a href="/cloud-native/docker/docker-compose.html" class="sidebar-link">Docker Compose</a></li><li><a href="/cloud-native/docker/docker-ui.html" class="sidebar-link">Docker 可视化工具</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="docker-网络"><a href="#docker-网络" class="header-anchor">#</a> Docker 网络</h1> <p>官方文档： <a href="https://docs.docker.com/network/" target="_blank" rel="noopener noreferrer">Configure networking<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p>Docker 允许通过外部访问容器或容器互联的方式来提供网络服务。</p> <p>Docker 中的网络通信是通过驱动程序完成的，默认的 Docker 提供了几种驱动程序：</p> <ul><li><code>bridge</code>： 默认的网络驱动。</li> <li><code>host</code></li> <li><code>overlay</code></li> <li><code>macvlan</code></li> <li><code>none</code></li></ul> <p>Docker 在 1.9 版本中引入了一整套的 <code>docker network</code> 子命令和跨主机网络支持。</p> <blockquote><div class="language- line-numbers-mode"><pre class="language-text"><code>查看所有的网络
	docker network ls

# 默认有三个网络
NETWORK ID          NAME                DRIVER              SCOPE
a1c4959cf71d        bridge              bridge              local
60b9c35f74ce        host                host                local
1d81bf674d88        none                null                local


创建一个网络
	docker network create

查看网络的细节
	docker network inspect

删除指定的网络
	docker network rm

删除所有未使用的网络
	docker network prune
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br></div></div></blockquote> <h2 id="bridge-驱动-桥接模式"><a href="#bridge-驱动-桥接模式" class="header-anchor">#</a> bridge 驱动（桥接模式）</h2> <p>bridge 是 docker 默认的网络驱动，使用该驱动时，运行的 docker 容器会连接到 docker 网桥上。</p> <blockquote><p>（1）docker 在启动的时候，会自动创建一个默认的网桥（网桥的名字就叫 bridge），在运行容器的时候如果没有特殊指定网络选项（<code>--network 或者 --net</code>），该容器将会连接到 bridge 网络上。用户还可以创建自定义的网桥网络，用户自定义的网桥网络会优于默认的 bridge 网络。</p> <p>（2）在 docker 中，bridge 模式下网络使用软件网桥。该网桥允许连接到统一网桥上的容器进行互相通信，同时与未连接到该网桥上的容器进行隔离。docker 的 bridge 驱动会自动的在宿主机上 install rules，所以这就是为什么不同网桥上的容器之间无法进行相互通信。</p> <blockquote><p>Tips： 在网络方面，桥接网络是在网段之间转发流量的链路层设备。桥接器可以是在主机内核中运行的硬件设备或软件设备。</p></blockquote> <p>（3）bridge 网络适用于在同一 docker 守护程序主机上运行的容器。对于在不同 docker 守护程序主机上运行的容器之间进行通信，您可以在OS级别管理路由，或者使用 overlay 网络模式。</p> <p>（4）brige 模式已经基本上可以满足 docker 容器最基本的使用需求了。但是这种模式和外界通信使用 NAT（网络地址转换），增加了通信的复杂性，在复杂场景下使用会有诸多限制。</p></blockquote> <h3 id="使用默认的网桥"><a href="#使用默认的网桥" class="header-anchor">#</a> 使用默认的网桥</h3> <blockquote><p>官方文档： <a href="https://docs.docker.com/network/network-tutorial-standalone/#use-the-default-bridge-network" target="_blank" rel="noopener noreferrer">使用默认网桥<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p>（1）查看 docker 网络列表： docker network ls</p> <p>（2）默认启动一个容器没有指定网络就是使用默认的 bridge 网桥</p> <blockquote><p>docker run -p 8080:8080 --name tomcat01 -d tomcat:8.0.52</p></blockquote></blockquote> <h3 id="使用自定义的网桥"><a href="#使用自定义的网桥" class="header-anchor">#</a> 使用自定义的网桥</h3> <blockquote><p>官方文档：  <a href="https://docs.docker.com/network/network-tutorial-standalone/#use-the-default-bridge-network" target="_blank" rel="noopener noreferrer">使用自定义网桥<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p>（1）查看 docker 网络列表： docker network ls</p> <p>（2）创建自定义的 bridge 网络： docker network  my_network01</p> <blockquote><p><code>可以通过 -d 选项指定网络类型，默认不指定的话就是 bridge</code></p></blockquote> <p>（3）运行容器并指定使用自定义网桥 my_network01</p> <blockquote><p>docker run -p 8081:8080 --net my_network01 -d --name tomcat02 tomcat:8.0.52</p></blockquote> <blockquote><p><code>可以通过 --network 或者 --net 选项指定自定义的网络</code></p></blockquote> <blockquote><p>注意： 使用 --network 或者 --net 指定一个网络的时候，该网络必须已经先创建好了</p></blockquote> <p>（4）查看自定义的网桥细节： docker network inspect my_network01</p> <p>（5）其他：</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>一旦在启动容器时指定了网桥之后，日后可以在任何这个网桥关联的容器中使用容器名字与其他容器进行通信。使用默认的 bridge 这个网桥无法使用名字，必须要是自定义的网桥才可以。
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div></blockquote> <h3 id="默认网桥-vs-自定义网桥"><a href="#默认网桥-vs-自定义网桥" class="header-anchor">#</a> 默认网桥 VS 自定义网桥</h3> <blockquote><p>官方文档： <a href="https://docs.docker.com/network/bridge/#differences-between-user-defined-bridges-and-the-default-bridge" target="_blank" rel="noopener noreferrer">默认网桥 VS 自定义网桥<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p></blockquote> <h3 id="总结"><a href="#总结" class="header-anchor">#</a> 总结</h3> <p><code>总结</code>：<code>bridge 模式适用于单个 Docker 主机的场景，并且当一个 Docker 主机中运行多个容器时，最好是使用自定义的网桥，把相关联的容器连接到自定义的网桥上</code>。</p> <h2 id="host-驱动"><a href="#host-驱动" class="header-anchor">#</a> host 驱动</h2> <blockquote><p>（1）使用这种驱动的时候，libnetwork 将不会为 docker 容器创建网络协议栈，即不会创建独立的 network namespace。</p> <p>（2）docker 容器中的京城处于宿主机的网络环境中，相当于 docker 容器和宿主机共用一个 network namespace，使用宿主机的网卡、IP 和端口等信息。但是容器其他方面，如文件系统、进程列表等还是和宿主机隔离的。</p> <p>（3）host 模式很好的解决了容器与外界通信的地址转换问题，可以直接使用宿主机的 IP 进行同i性能，不存在虚拟化网络带来的额外性能负担。但是 host 驱动也降低了容器与容器之间、容器与宿主机之间的网络层面的隔离，引起网络资源的竞争与冲突。因此 host 驱动使用了对容器集群规模不大的场景。</p></blockquote> <h2 id="overlay-驱动"><a href="#overlay-驱动" class="header-anchor">#</a> overlay 驱动</h2> <blockquote><p>此驱动采用 IETF 标准的 VXLAN 方式，并且是 VXLAN 中最普遍认为最适合大规模的云计算虚拟化环境的 SDN controller 模式。在使用的过程中，需要一个额外的存储配置服务，例如 Consul、etcd 或者 Zookeeper 。还需要在启动 docker daemon 的时候额外添加参数来指定所使用的配置存储服务地址。</p> <p><code>overlay 适用于多主机 Docker（集群服务）</code></p> <p><code>官方文档</code>： <a href="https://docs.docker.com/network/network-tutorial-overlay/" target="_blank" rel="noopener noreferrer">集群服务下使用 overlay 驱动<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p></blockquote> <h2 id="macvlan-驱动"><a href="#macvlan-驱动" class="header-anchor">#</a> macvlan 驱动</h2> <blockquote><p>Macvlan网络允许您将MAC地址分配给容器，使其在网络上显示为物理设备。 Docker守护程序通过其MAC地址将流量路由到容器。 在处理希望直接连接到物理网络而不是通过Docker主机的网络堆栈进行路由的旧应用程序时，使用macvlan驱动程序有时是最佳选择。</p></blockquote> <h2 id="none-驱动"><a href="#none-驱动" class="header-anchor">#</a> none 驱动</h2> <blockquote><p>使用这种驱动的时候，docker 容器禁用所有网络，通常与自定义网络驱动程序一起使用。</p></blockquote> <h2 id="几种网络模式的总结"><a href="#几种网络模式的总结" class="header-anchor">#</a> 几种网络模式的总结</h2> <blockquote><p>（1）单主机 Docker 推荐使用 bridge 模式， 该模式也是 Docker 默认的网络模式。</p> <p>（2）集群下推荐使用 overlay 模式</p> <p>（3）自定义网络驱动下，配合 none 模式。</p></blockquote></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/cloud-native/docker/docker-data-persistent.html" class="prev">
        Docker 数据持久化
      </a></span> <span class="next"><a href="/cloud-native/docker/docker-install-service.html">
        Docker 安装常用的软件
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.fa9b922e.js" defer></script><script src="/assets/js/2.25cc5d58.js" defer></script><script src="/assets/js/16.bc1151d9.js" defer></script>
  </body>
</html>
